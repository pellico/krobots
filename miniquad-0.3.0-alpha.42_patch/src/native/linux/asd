pub struct LibX11 {
    module: crate::module::Module,
    XSetWMNormalHints: XSetWMNormalHints,
    XAllocSizeHints: XAllocSizeHints,
    Xutf8SetWMProperties: Xutf8SetWMProperties,
    XLookupString: XLookupString,
    XInitThreads: XInitThreads,
    XrmInitialize: XrmInitialize,
    XOpenDisplay: XOpenDisplay,
    XResourceManagerString: XResourceManagerString,
    XInternAtom: XInternAtom,
    XCreateColormap: XCreateColormap,
    XCreateWindow: XCreateWindow,
    XSetWMProtocols: XSetWMProtocols,
    XChangeProperty: XChangeProperty,
    XSync: XSync,
    XSetErrorHandler: XSetErrorHandler,
    XGetWindowAttributes: XGetWindowAttributes,
    XMapWindow: XMapWindow,
    XLowerWindow: XLowerWindow,
    XRaiseWindow: XRaiseWindow,
    XPending: XPending,
    XNextEvent: XNextEvent,
    XGetKeyboardMapping: XGetKeyboardMapping,
    XGetWindowProperty: XGetWindowProperty,
    XFree: XFree,
    XUnmapWindow: XUnmapWindow,
    XDestroyWindow: XDestroyWindow,
    XFreeColormap: XFreeColormap,
    XFlush: XFlush,
    XCloseDisplay: XCloseDisplay,
    XGrabPointer: XGrabPointer,
    XUngrabPointer: XUngrabPointer,
    XSendEvent: XSendEvent,
    XrmGetResource: XrmGetResource,
    XrmDestroyDatabase: XrmDestroyDatabase,
    XrmGetStringDatabase: XrmGetStringDatabase,
    XkbSetDetectableAutoRepeat: XkbSetDetectableAutoRepeat,
    XQueryExtension: XQueryExtension,
    XCreateFontCursor: XCreateFontCursor,
    XCreateBitmapFromData: XCreateBitmapFromData,
    XCreatePixmapCursor: XCreatePixmapCursor,
    XFreePixmap: XFreePixmap,
    XDefineCursor: XDefineCursor,
}

impl LibX11 {
    pub fn try_load() -> Option<LibX11> {
        crate::module::Module::load("libX11.so")
            .or_else(|_| crate::module::Module::load("libX11.so.6"))
            .map(|module| LibX11 {
                XSetWMNormalHints: module.get_symbol("XSetWMNormalHints").unwrap(),
                XAllocSizeHints: module.get_symbol("XAllocSizeHints").unwrap(),
                Xutf8SetWMProperties: module.get_symbol("Xutf8SetWMProperties").unwrap(),
                XLookupString: module.get_symbol("XLookupString").unwrap(),
                XInitThreads: module.get_symbol("XInitThreads").unwrap(),
                XrmInitialize: module.get_symbol("XrmInitialize").unwrap(),
                XOpenDisplay: module.get_symbol("XOpenDisplay").unwrap(),
                XResourceManagerString: module.get_symbol("XResourceManagerString").unwrap(),
                XInternAtom: module.get_symbol("XInternAtom").unwrap(),
                XCreateColormap: module.get_symbol("XCreateColormap").unwrap(),
                XCreateWindow: module.get_symbol("XCreateWindow").unwrap(),
                XSetWMProtocols: module.get_symbol("XSetWMProtocols").unwrap(),
                XChangeProperty: module.get_symbol("XChangeProperty").unwrap(),
                XSync: module.get_symbol("XSync").unwrap(),
                XSetErrorHandler: module.get_symbol("XSetErrorHandler").unwrap(),
                XGetWindowAttributes: module.get_symbol("XGetWindowAttributes").unwrap(),
                XMapWindow: module.get_symbol("XMapWindow").unwrap(),
                XLowerWindow: module.get_symbol("XLowerWindow").unwrap(),
                XRaiseWindow: module.get_symbol("XRaiseWindow").unwrap(),
                XPending: module.get_symbol("XPending").unwrap(),
                XNextEvent: module.get_symbol("XNextEvent").unwrap(),
                XGetKeyboardMapping: module.get_symbol("XGetKeyboardMapping").unwrap(),
                XGetWindowProperty: module.get_symbol("XGetWindowProperty").unwrap(),
                XFree: module.get_symbol("XFree").unwrap(),
                XUnmapWindow: module.get_symbol("XUnmapWindow").unwrap(),
                XDestroyWindow: module.get_symbol("XDestroyWindow").unwrap(),
                XFreeColormap: module.get_symbol("XFreeColormap").unwrap(),
                XFlush: module.get_symbol("XFlush").unwrap(),
                XCloseDisplay: module.get_symbol("XCloseDisplay").unwrap(),
                XGrabPointer: module.get_symbol("XGrabPointer").unwrap(),
                XUngrabPointer: module.get_symbol("XUngrabPointer").unwrap(),
                XSendEvent: module.get_symbol("XSendEvent").unwrap(),
                XrmGetResource: module.get_symbol("XrmGetResource").unwrap(),
                XrmDestroyDatabase: module.get_symbol("XrmDestroyDatabase").unwrap(),
                XrmGetStringDatabase: module.get_symbol("XrmGetStringDatabase").unwrap(),
                XkbSetDetectableAutoRepeat: module
                    .get_symbol("XkbSetDetectableAutoRepeat")
                    .unwrap(),
                XQueryExtension: module.get_symbol("XQueryExtension").unwrap(),
                XCreateFontCursor: module.get_symbol("XCreateFontCursor").unwrap(),
                XCreateBitmapFromData: module.get_symbol("XCreateBitmapFromData").unwrap(),
                XCreatePixmapCursor: module.get_symbol("XCreatePixmapCursor").unwrap(),
                XFreePixmap: module.get_symbol("XFreePixmap").unwrap(),
                XDefineCursor: module.get_symbol("XDefineCursor").unwrap(),
                module,
            })
    }
}
